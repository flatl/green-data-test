{"version":3,"sources":["models/index.ts","lib/LocalStorageDB.ts","components/EmployeeList.tsx","components/atoms/InputCheckBox.tsx","components/atoms/InputText.tsx","components/atoms/InputSelect.tsx","components/Form.tsx","components/atoms/Button.tsx","components/atoms/Modal.tsx","components/App.tsx","index.tsx"],"names":["NullEmployee","id","name","surname","patronymic","position","sex","isDismissed","LocalStorageDBImplementation","keyPrefix","prefix","window","localStorage","ReferenceError","this","key","getItem","item","Error","JSON","parse","Object","getOwnPropertyNames","filter","startsWith","map","value","stringifiedValue","stringify","setItem","updatedItem","Array","isArray","assign","removeItem","EmployeeList","list","currentEmployee","handleSelect","getCls","className","i","onClick","InputCheckBox","isChecked","onToggle","label","htmlFor","checked","onChange","type","InputText","placeholder","InputSelect","currentValue","defaultValue","disabled","EmployeeForm","positions","setCurrentEmployee","onIsFormValid","handleChangeEmployeeField","field","event","target","isFormValid","length","console","log","Button","isDisplayed","isActive","classNames","cls","join","style","display","opacity","ModalWindow","props","isOpen","handleClose","stopPropagation","children","employeeDB","hasAnyUnsavedChanges","App","useState","getAll","employees","setEmployees","setIsFormValid","isModalOpen","setIsModalOpen","isNewEmployee","handleUpdate","employee","employeeWithId","uuid","isItemInDB","updateItem","Modal","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b3b8bacc.chunk.js","sourcesContent":["export type Sex = 'М' | 'Ж'\n\nexport interface Employee {\n  id: string\n  name: string\n  surname: string\n  patronymic: string\n  position: string\n  sex: Sex\n  isDismissed: boolean\n}\n\nexport const NullEmployee: Employee = {\n  id: '-1',\n  name: '',\n  surname: '',\n  patronymic: '',\n  position: '',\n  sex: 'М',\n  isDismissed: false\n}\n","interface LocalStorageDB {\n  /**\n   * Проверка на наличие записи по ключу.\n   * \n   * !Важно совершать ее перед каждым\n   * обращением к методам get/set/update(Item)\n   * во избежании ошибок времени выполнения\n   */\n  isItemInDB (key: string): boolean;\n  getItem (key: string): any;\n  getAll (): any[];\n  setItem (key: string, value: any): void;\n  updateItem (key: string, value: any): void;\n  removeItem (key: string): void;\n}\n\nclass LocalStorageDBImplementation<T> implements LocalStorageDB {\n  private prefix: string\n  \n  constructor (keyPrefix: string = 'item-') {\n    if (!window?.localStorage) {\n      throw new ReferenceError('It doesn\\'t work outside Browser LocalStorage API')\n    }\n\n    this.prefix = keyPrefix\n  }\n  \n  isItemInDB (key: string): boolean {\n    return localStorage.getItem(this.prefix + key) !== null\n  }\n\n  getItem (key: string): T {\n    const item = localStorage.getItem(this.prefix + key)\n    if (!item) {\n      throw new Error('Nothing stored with key: ' + key)\n    }\n    return JSON.parse(item)\n  }\n\n  getAll (): T[] {\n    return Object.getOwnPropertyNames(localStorage)\n      .filter(key => key.startsWith(this.prefix))\n      .map(key => JSON.parse(localStorage.getItem(key) as string))\n  }\n\n  setItem (key: string, value: T): void {\n    const stringifiedValue = JSON.stringify(value)\n    localStorage.setItem(this.prefix + key, stringifiedValue)\n  }\n\n  /**\n   * Работает только для записей с типом Object, Array\n   * Для других необходимо перезаписать метод\n   * @param key \n   * @param value \n   */\n  updateItem (key: string, value: T): void {\n    const item = JSON.parse(localStorage.getItem(this.prefix + key) as string)\n    let updatedItem: any\n\n    if (Array.isArray(item) && Array.isArray(value)) {\n      updatedItem = [...item, ...value]\n    } else if (typeof item === 'object') {\n      updatedItem = Object.assign(item, value)\n    }\n\n    localStorage.setItem(this.prefix + key, JSON.stringify(updatedItem))\n  }\n\n  removeItem (key: string): void {\n    localStorage.removeItem(this.prefix + key)\n  }\n}\n\nexport {\n  LocalStorageDBImplementation\n}","import React from 'react'\nimport { Employee } from './../models/index'\n\nexport interface Props {\n  list: Employee[]\n  currentEmployee: Employee\n  handleSelect: (item: Employee) => () => void\n}\n\nconst EmployeeList = ({ list, currentEmployee, handleSelect }: Props) => {\n  const getCls = (item: Employee) => (\n    item.id === currentEmployee.id ? 'employee-list__item selected' : 'employee-list__item' \n  )\n\n  return (\n    <div className=\"employee-list\">\n      { list.map((item, i) => (\n        <div onClick={handleSelect(item)}\n          className={getCls(item)} key={i}\n        >\n          <div className=\"employee-list__item-name\">\n            { `${item.surname} ${item.name} ${item.patronymic}` }\n          </div>\n          <div className=\"employee-list__item-position\">\n            { item.position }\n          </div>\n\n          <div className=\"background\"></div>\n        </div> \n      ))}\n    </div>\n  );\n}\n\nexport default EmployeeList ","import React, { ChangeEvent } from 'react'\n\nexport interface Props {\n  isChecked: boolean\n  name: string\n  label: string\n  onToggle: (event: ChangeEvent<HTMLInputElement>) => any\n}\n\nconst InputCheckBox = ({ isChecked, onToggle, name, label }: Props) => {\n  return (\n    <div className=\"input input-checkbox\">\n      <label htmlFor={name} className=\"input-checkbox__label text text-small\">\n        {label}\n      </label>\n      <input checked={isChecked} onChange={onToggle}\n        name={name} type=\"checkbox\" className=\"input-checkbox__input text text-large\"\n      />\n    </div>\n  )\n}\n\nexport default InputCheckBox\n","import React, { ChangeEvent } from 'react'\n\nexport interface Props {\n  value: string\n  name: string\n  placeholder: string\n  label: string\n  onChange: (event: ChangeEvent<HTMLInputElement>) => any\n}\n\nconst InputText = ({ value, onChange, name, placeholder, label }: Props) => {\n  return (\n    <div className=\"input input-text\">\n      <label htmlFor={name} className=\"input-text__label text text-small\">\n        { label }\n      </label>\n      <input className=\"input-text__input text text-large\"\n        value={value} onChange={onChange}\n        name={name} placeholder={placeholder} type=\"text\"\n      ></input>\n    </div>\n  )\n}\n\nexport default InputText\n","import React from 'react'\n\nexport interface Props {\n  list: string[]\n  currentValue: string\n  defaultValue: string\n  name: string\n  label: string\n  handleSelect: (event: React.ChangeEvent<HTMLSelectElement>) => void\n}\n\n\nconst InputSelect = ({ list, currentValue, defaultValue, name, label, handleSelect }: Props) => {\n  if (!currentValue)\n    currentValue = defaultValue\n  return (\n    <div className=\"input input-select\">\n      <label htmlFor={name} className=\"input-select__label text text-small\">\n        {label}\n      </label>\n      <select name={name} onChange={handleSelect} value={currentValue}\n        className=\"input-select__select text text-large\"\n      >\n        <option disabled>{defaultValue}</option>\n        { list.map((value, i) => (\n          <option className=\"input-select__option text text-large\" key={i}>\n            {value}\n          </option>\n        )) }\n      </select>\n    </div>\n  )\n}\n\nexport default InputSelect\n","import React from 'react'\nimport { Employee, Sex } from './../models'\n\nimport InputCheckBox from './../components/atoms/InputCheckBox'\nimport InputText from './../components/atoms/InputText'\nimport InputSelect from './../components/atoms/InputSelect'\n\nexport interface Props {\n  currentEmployee: Employee\n  positions: string[]\n\n  setCurrentEmployee: (employee: Employee) => void\n  onIsFormValid: (value: boolean) => void\n}\n\nconst EmployeeForm = ({ currentEmployee, positions, setCurrentEmployee, onIsFormValid }: Props) => {\n  \n  const handleChangeEmployeeField = (field: string) => (event: any) => {\n    setCurrentEmployee({ ...currentEmployee, [field]: event.target.value })\n  }\n\n  const handleSelectSex = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    const { value } = event.target\n    setCurrentEmployee({ ...currentEmployee, sex: (value as Sex) })\n  } \n\n  const handleSelectPosition = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    const { value } = event.target\n    setCurrentEmployee({ ...currentEmployee, position: value })\n  }\n\n  const toggleIsDismissed = () => {\n    setCurrentEmployee({ ...currentEmployee, isDismissed: !currentEmployee.isDismissed })\n  }\n\n  const isFormValid = currentEmployee.surname.length > 1\n    && currentEmployee.name.length > 1\n    && currentEmployee.patronymic.length > 1\n    && currentEmployee.position !== ''\n  console.log(isFormValid)\n  onIsFormValid(isFormValid)\n\n  return (\n    <form className=\"form\">\n    <InputText value={currentEmployee.surname} onChange={handleChangeEmployeeField('surname')}\n      name=\"surname\" label=\"Фамилия\" placeholder=\"\"\n    />\n\n    <InputText value={currentEmployee.name} onChange={handleChangeEmployeeField('name')}\n      name=\"name\" label=\"Имя\" placeholder=\"\"\n    />\n\n    <InputText value={currentEmployee.patronymic} onChange={handleChangeEmployeeField('patronymic')}\n      name=\"patronymic\" label=\"Отчество\" placeholder=\"\"\n    />\n\n    <InputSelect list={positions} currentValue={currentEmployee.position}\n      handleSelect={handleSelectPosition} defaultValue=\"Выбрать должность\"\n      name=\"position\" label=\"Должность\"\n    />\n\n    <InputSelect list={['М', 'Ж']} currentValue={currentEmployee.sex}\n      handleSelect={handleSelectSex} defaultValue=\"Выбрать пол\"\n      name=\"sex\" label=\"Пол\"\n    />\n\n    <InputCheckBox isChecked={currentEmployee.isDismissed} onToggle={toggleIsDismissed}\n      name=\"dismissed\" label=\"Уволен?\"\n    />\n    </form>\n  )\n}\n\nexport default EmployeeForm\n","import React from 'react'\n\nexport interface Props {\n  isDisplayed: boolean\n  isActive: boolean\n  label: string\n  classNames: string[]\n\n  onClick: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void\n}\n\nconst Button = ({ isDisplayed, isActive, label, classNames, onClick }: Props) => {\n  const cls = [...classNames, 'button', 'text text-medium'].join(' ')\n  return (\n    <button className={cls} disabled={!isActive}\n      style={{\n        display: isDisplayed ? 'flex' : 'none',\n        opacity: isActive ? '1' : '.7'\n      }}\n      onClick={onClick}\n    >\n      {label}\n    </button>\n  )\n}\n\nexport default Button","import React from 'react'\n\nconst ModalWindow = (props: any) => {\n  const { isOpen, handleClose } = props\n\n  const stopPropagation = (event: any) => event.stopPropagation()\n  return (\n    isOpen && (\n    <div className=\"modal\" onClick={handleClose}>\n      <div className=\"modal__window\" onClick={stopPropagation}>\n        {props.children}\n      </div>\n    </div>\n    )\n  )\n}\n\nexport default ModalWindow\n","import React, { useState } from 'react'\nimport * as uuid from 'uuid'\n\nimport { Employee, NullEmployee } from './../models'\nimport { LocalStorageDBImplementation } from './../lib/LocalStorageDB'\n\nimport EmployeeList from './../components/EmployeeList'\nimport EmployeeForm from './../components/Form'\nimport Button from './../components/atoms/Button'\nimport ModalWindow from './../components/atoms/Modal'\n\nimport './../assets/css/app.scss'\n\nconst positions = ['пекарь-виртуоз', 'охранник', 'топ-менеджер', 'кондитер', 'бухгалтер', 'разнорабочий'] \n\nconst employeeDB = new LocalStorageDBImplementation<Employee>('employee')\n\nlet hasAnyUnsavedChanges = false\n\nconst App = () => {\n  const [employees, setEmployees] = useState(employeeDB.getAll())\n  const [currentEmployee, setCurrentEmployee] = useState(NullEmployee)\n\n  const [isFormValid, setIsFormValid] = useState(false)\n\n  const [isModalOpen, setIsModalOpen] = useState(false)\n\n  const isNewEmployee = currentEmployee.id === NullEmployee.id\n\n  const setEmployeeProxy = (employee: Employee) => {\n    setCurrentEmployee(employee)\n    hasAnyUnsavedChanges = true\n  } \n\n  const handleSave = () => {\n    if (isNewEmployee) {\n      const employeeWithId = { ...currentEmployee, id: uuid.v4() }\n      employeeDB.setItem(employeeWithId.id, employeeWithId)\n    } else if (employeeDB.isItemInDB(currentEmployee.id)) {\n      employeeDB.updateItem(currentEmployee.id, currentEmployee)\n    } else {\n      throw new Error('Cannot find employee with id ' + currentEmployee.id)\n    }\n\n    setCurrentEmployee(NullEmployee)\n    hasAnyUnsavedChanges = false\n  }\n\n  const showModal = () => {\n    setIsModalOpen(true)\n  }\n\n  const handleAdd = () => {\n    setCurrentEmployee(NullEmployee)\n  }\n\n  const handleRemove = () => {\n    employeeDB.removeItem(currentEmployee.id)\n    hasAnyUnsavedChanges = false\n  }\n\n  const handleUpdate = () => {\n    if (hasAnyUnsavedChanges) {\n      showModal()\n    } else {\n      setEmployees(employeeDB.getAll())\n      setCurrentEmployee(NullEmployee)\n    }\n  }\n\n  const handleContinue = () => {\n    setIsModalOpen(false)\n    hasAnyUnsavedChanges = false\n    handleUpdate()\n  }\n\n  const handleSelectEmployee = (employee: Employee) => () => {\n    setCurrentEmployee(employee)\n  }\n\n  return (\n    <div className=\"App\">\n      <aside className=\"aside\">\n        <header className=\"header text-large\">\n          <div className=\"title\">Список сотрудников</div>\n        </header>\n\n        <EmployeeList list={ employees } currentEmployee={currentEmployee}\n          handleSelect={handleSelectEmployee}\n        />\n      </aside>\n\n      <main className=\"content\">\n        <header className=\"header\">\n          { isNewEmployee && (\n            <div className=\"title text-large\">Добавить сотрудника</div>\n          )}\n          { !isNewEmployee && (\n            <div className=\"title text-large\">Редактировать сотрудника</div>\n          )}\n        </header>\n\n        <EmployeeForm currentEmployee={currentEmployee} positions={positions}\n          setCurrentEmployee={setEmployeeProxy}\n          onIsFormValid={(value: boolean) => setIsFormValid(value)}\n        />\n\n        <div className=\"buttons\">\n          <Button onClick={handleUpdate} isDisplayed={true} isActive={true}\n            label=\"Обновить\" classNames={[\"update\"]}\n          />\n\n          <Button onClick={handleAdd} isDisplayed={!isNewEmployee} isActive={true}\n            label=\"Добавить\" classNames={[\"add\"]}\n          />\n\n          <Button onClick={handleSave} isDisplayed={true} isActive={isFormValid}\n            label=\"Сохранить\" classNames={[\"save\"]}\n          />\n\n          <Button onClick={handleRemove} isDisplayed={!isNewEmployee} isActive={true}\n            label=\"Удалить\" classNames={[\"remove\"]}\n          />\n        </div>\n      </main>\n\n      <ModalWindow isOpen={isModalOpen} handleClose={() => setIsModalOpen(false)}>\n        <section className=\"title text text-large\">Если продолжить текущие изменения будут потеряны, вы уверены?</section>\n\n        <section className=\"buttons\">\n          <Button onClick={() => setIsModalOpen(false)} isDisplayed={true} isActive={true}\n            label=\"Закрыть\" classNames={[\"close\"]}\n          />\n\n          <Button onClick={handleContinue } isDisplayed={true} isActive={true}\n            label=\"Продолжить\" classNames={[\"continue\"]}\n          />\n        </section>\n      </ModalWindow>\n    </div>\n  );\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './assets/css/index.scss'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}